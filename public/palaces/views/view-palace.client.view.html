<!-- La view palacio -->


<div data-ng-controller="PalacesController" data-ng-init="findOne()">
  <div class = "text-center panel onePalaceTitulo">
    <h1 data-ng-bind="palace.name"></h1>
    <h4>{{palace.town}} - {{palace.country}}</h4>
  </div>

  <div class = "row onePalaceRow">
    <div id = "onePalaceFilter" class="col-sm-4">
      <div class="panel">
        <rating class = "rating" ng-model=palace.rate max = "5" readonly ="true"></rating>
        <span>  ({{palace.rate | number:2}}) </span>
        <h6><a href = "#listComments" target="_self">Tiene {{palace.comments.length}} comentarios</a></h6>
        <a  data-ng-show="authentication.user" class= "btn btn-success" href="/#!/comments/create" data-ng-click="newComment(palace._id);">Añadir comentario</a>
      </div>
        <div id = "onePalaceMap" class = "panel">
                <div id = "searchMap" class = "panel ">
                        <div class = "google-map-container">
                            <div map-lazy-load = "https://maps.google.com/maps/api/js?key={{API_KEY}}">
                                <ng-map class = "google-map-container"
                                    zoom = "17"
                                    center="{{palace.coord.lat}},{{palace.coord.lng}}"
                                    default-style = "false">
                                    <marker  ng-repeat = "p in palaces"
                                        id="custom-marker-{{$index}}"
                                        position="[{{p.coord.lat}},{{p.coord.lng}}]"
                                        icon= "icons/palace_blue.png"
                                        on-mouseover="showPalace(event, p)"
                                        on-mouseout="hideInfo(event)"
                                        on-click = "goToPalace(event,p)">
                                    </marker>
                                    <info-window id="myInfoWindow" class="infoWindow" disableAutoPan =" true">
                                        <a ng-href = "#/onePalace" ng-click = "setIndex(selectedPalace.name)">
                                        <div ng-non-bindable="">
                                            <h6>{{selectedPalace.name}}</h6>
                                            <!--<img class="imgInMap" src="{{selectedPalace.picture[0].url}}">-->
                                        </div>
                                        </a>
                                    </info-window>
                                </ng-map>
                            </div>
                        </div>
                    </div>      </div>
      <div id = "onePalaceDir" class = "panel">
        <h6><span class="glyphicon glyphicon-globe"></span><a href="{{palace.web}}" target="_blank"> {{palace.web}} </a></h6>
        <h6><span class="glyphicon glyphicon-phone-alt"></span> {{palace.phone}}</h6>
        <h6><span class="glyphicon glyphicon-home"></span>  {{palace.email}}</h6>
        <h6><span class="glyphicon glyphicon-envelope"></span> {{palace.address}}</h6>
        <h6><img src="icons/city.jpg"> {{palace.town}}</h6>
        <h6><img src="icons/country.png">  {{palace.country}}</h6>

      </div>
      <h3 class="panel-heading">Comentarios</h3>

      <div class = "commentList" ng-repeat = "comment in palace.comments" id = "listComments">
        <div class = "comment panel">
          <h5><strong>Comentario de: </strong>{{comment.author.fullName}}</h5>
          <h6><strong>Realizado el:  </strong>{{comment.date | date:'dd/MM/yyyy'}}</h6>
          <h4 class = "title">"{{comment.title}}"</h4>
          <rating class = "rating" ng-model=comment.customerRate max = "5" readonly ="true"></rating>
          <h6><textarea  class = "commentArea" rows="7" readonly>{{comment.text}}</textarea></h6>
        </div>
      </div>
    </div>




    <div id = "onePalaceFull" class="col-sm-8">
            <!--------------------------------
            ---Mensaje de ALERTA PRE DELETE---      
            ---------------------------------->
            <div class="alert alert-danger " data-ng-show="deletePalace">
                    <span class="btn closebtn text-right" data-ng-click="closeAlert();">
                        <strong>&times;</strong> 
                    </span>
                    <h4>Se va a eliminar el palacio <strong>{{palace.name}}</strong>. ¿Desea continuar?</h4><br />
                <a href="/#!/palaces" class="btn btn-success" data-ng-click="delete(palace);">Continuar</a>
                <a href="/#!/palaces/{{palace._id}}" class="btn btn-danger" data-ng-click="closeAlert();">Cancelar</a>
            </div>   
             <!--------------------------------   
            ---------------------------------->
                    
         <div class="containerOnePalacePicture">
            <div class="btn-group botonesFotoOnePalace" data-ng-show="authentication.user.isAdmin">
                <a class="btn btn-info" href="/#!/palaces/{{palace._id}}/edit">editar</a>
                <a class="btn btn-danger" href="/#!/palaces/{{palace._id}}" data-ng-click="openAlert();">borrar</a>
            </div>     
             <div class="containerPhoto">
                 <img class="itemPalace panel photoItemPalace" ng-src="{{palace.picture[0].url}}">
                 <a class="openMorePhotosButton" href="/#!/palaces/gallery/{{palace._id}}" >Más fotos</a>
             </div>
        </div>
        <div class = "resena panel">
        <span><textarea id="resena"  readonly>{{palace.resena}}</textarea></span>
      </div>

    </div>

  </div>
</div>
